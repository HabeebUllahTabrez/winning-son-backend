<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Winning Son API Documentation</title>
    <link rel="stylesheet" href="https://unpkg.com/swagger-ui-dist@5/swagger-ui.css">
    <style>
        body {
            margin: 0;
            padding: 0;
        }
        .swagger-ui .topbar {
            display: none;
        }
        #header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            text-align: center;
        }
        #header h1 {
            margin: 0;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
        }
        #header p {
            margin: 10px 0 0 0;
            opacity: 0.9;
        }
    </style>
</head>
<body>
    <div id="header">
        <h1>üèÜ Winning Son API</h1>
        <p>Interactive API Documentation</p>
    </div>
    <div id="swagger-ui"></div>

    <script src="https://unpkg.com/swagger-ui-dist@5/swagger-ui-bundle.js"></script>
    <script src="https://unpkg.com/swagger-ui-dist@5/swagger-ui-standalone-preset.js"></script>
    <script>
        // Embedded Swagger specification
        const spec = {"swagger": "2.0", "info": {"description": "API for journaling, goal tracking, and personal development metrics", "title": "Winning Son API", "termsOfService": "http://swagger.io/terms/", "contact": {"name": "API Support", "email": "support@example.com"}, "license": {"name": "MIT", "url": "https://opensource.org/licenses/MIT"}, "version": "1.0"}, "host": "localhost:8080", "basePath": "/api", "paths": {"/admin/overview": {"get": {"security": [{"BearerAuth": []}], "description": "Returns administrative statistics and metrics (admin only)", "consumes": ["application/json"], "produces": ["application/json"], "tags": ["admin"], "summary": "Get admin overview", "responses": {"200": {"description": "OK", "schema": {"$ref": "#/definitions/handlers.adminOverview"}}, "403": {"description": "Forbidden", "schema": {"type": "string"}}, "500": {"description": "Internal server error", "schema": {"type": "string"}}}}}, "/analyzer/mark-used": {"post": {"security": [{"BearerAuth": []}], "description": "Marks that the user has used the analyzer feature for the first time", "consumes": ["application/json"], "produces": ["application/json"], "tags": ["analyzer"], "summary": "Mark analyzer as used", "responses": {"200": {"description": "Analyzer usage recorded successfully", "schema": {"type": "object", "additionalProperties": true}}, "500": {"description": "Internal server error", "schema": {"type": "string"}}}}}, "/auth/login": {"post": {"description": "Authenticate user and return JWT token", "consumes": ["application/json"], "produces": ["application/json"], "tags": ["auth"], "summary": "User login", "parameters": [{"description": "User credentials", "name": "credentials", "in": "body", "required": true, "schema": {"$ref": "#/definitions/handlers.credentials"}}], "responses": {"200": {"description": "token", "schema": {"type": "object", "additionalProperties": true}}, "400": {"description": "Bad request", "schema": {"type": "string"}}, "401": {"description": "Invalid credentials", "schema": {"type": "string"}}, "500": {"description": "Internal server error", "schema": {"type": "string"}}}}}, "/auth/signup": {"post": {"description": "Create a new user account", "consumes": ["application/json"], "produces": ["application/json"], "tags": ["auth"], "summary": "User signup", "parameters": [{"description": "User credentials", "name": "credentials", "in": "body", "required": true, "schema": {"$ref": "#/definitions/handlers.credentials"}}], "responses": {"200": {"description": "token", "schema": {"type": "object", "additionalProperties": true}}, "400": {"description": "Bad request", "schema": {"type": "string"}}, "500": {"description": "Internal server error", "schema": {"type": "string"}}}}}, "/dashboard": {"get": {"security": [{"BearerAuth": []}], "description": "Aggregates and useful metrics to power the dashboard", "consumes": ["application/json"], "produces": ["application/json"], "tags": ["dashboard"], "summary": "Get dashboard metrics", "parameters": [{"type": "string", "description": "Reference date (YYYY-MM-DD)", "name": "local_date", "in": "query"}], "responses": {"200": {"description": "OK", "schema": {"$ref": "#/definitions/handlers.dashboardResponse"}}, "500": {"description": "Internal server error", "schema": {"type": "string"}}}}}, "/dashboard/submission-history": {"get": {"security": [{"BearerAuth": []}], "description": "Returns whether the user has submissions for each day in a date range (max 365 days)", "consumes": ["application/json"], "produces": ["application/json"], "tags": ["dashboard"], "summary": "Get submission history", "parameters": [{"type": "string", "description": "Start date (YYYY-MM-DD)", "name": "start_date", "in": "query", "required": true}, {"type": "string", "description": "End date (YYYY-MM-DD)", "name": "end_date", "in": "query", "required": true}], "responses": {"200": {"description": "OK", "schema": {"$ref": "#/definitions/handlers.submissionHistoryResponse"}}, "400": {"description": "Bad request", "schema": {"type": "string"}}, "500": {"description": "Internal server error", "schema": {"type": "string"}}}}}, "/journal": {"get": {"security": [{"BearerAuth": []}], "description": "Get list of journal entries with optional date range filtering", "consumes": ["application/json"], "produces": ["application/json"], "tags": ["journal"], "summary": "List journal entries", "parameters": [{"type": "string", "description": "Start date (YYYY-MM-DD)", "name": "start_date", "in": "query"}, {"type": "string", "description": "End date (YYYY-MM-DD)", "name": "end_date", "in": "query"}], "responses": {"200": {"description": "OK", "schema": {"type": "array", "items": {"$ref": "#/definitions/handlers.journalEntry"}}}, "400": {"description": "Bad request", "schema": {"type": "string"}}, "500": {"description": "Internal server error", "schema": {"type": "string"}}}}, "post": {"security": [{"BearerAuth": []}], "description": "Creates a new journal entry or updates an existing one for the same user and date", "consumes": ["application/json"], "produces": ["application/json"], "tags": ["journal"], "summary": "Create or update journal entry", "parameters": [{"description": "Journal entry", "name": "entry", "in": "body", "required": true, "schema": {"$ref": "#/definitions/handlers.journalRequest"}}], "responses": {"200": {"description": "Entry saved successfully", "schema": {"type": "object", "additionalProperties": true}}, "400": {"description": "Bad request", "schema": {"type": "string"}}, "500": {"description": "Internal server error", "schema": {"type": "string"}}}}, "delete": {"security": [{"BearerAuth": []}], "description": "Removes a journal entry for the authenticated user by date", "consumes": ["application/json"], "produces": ["application/json"], "tags": ["journal"], "summary": "Delete journal entry", "parameters": [{"description": "Local date (YYYY-MM-DD)", "name": "body", "in": "body", "required": true, "schema": {"type": "object", "properties": {"local_date": {"type": "string"}}}}], "responses": {"204": {"description": "No content"}, "400": {"description": "Bad request", "schema": {"type": "string"}}, "404": {"description": "Not found", "schema": {"type": "string"}}, "500": {"description": "Internal server error", "schema": {"type": "string"}}}}}, "/me": {"get": {"security": [{"BearerAuth": []}], "description": "Returns the authenticated user's profile information", "consumes": ["application/json"], "produces": ["application/json"], "tags": ["user"], "summary": "Get current user profile", "responses": {"200": {"description": "OK", "schema": {"$ref": "#/definitions/handlers.UserDTO"}}, "404": {"description": "Not found", "schema": {"type": "string"}}, "500": {"description": "Internal server error", "schema": {"type": "string"}}}}, "put": {"security": [{"BearerAuth": []}], "description": "Updates provided fields on the current user's profile", "consumes": ["application/json"], "produces": ["application/json"], "tags": ["user"], "summary": "Update user profile", "parameters": [{"description": "Profile fields to update", "name": "profile", "in": "body", "required": true, "schema": {"type": "object", "properties": {"avatar_id": {"type": "integer"}, "end_date": {"type": "string"}, "first_name": {"type": "string"}, "goal": {"type": "string"}, "is_admin": {"type": "boolean"}, "last_name": {"type": "string"}, "start_date": {"type": "string"}}}}], "responses": {"204": {"description": "No content"}, "400": {"description": "Bad request", "schema": {"type": "string"}}, "500": {"description": "Internal server error", "schema": {"type": "string"}}}}}, "/me/feature-status": {"get": {"security": [{"BearerAuth": []}], "description": "Returns onboarding/feature completion status for the current user", "consumes": ["application/json"], "produces": ["application/json"], "tags": ["user"], "summary": "Get feature status", "responses": {"200": {"description": "OK", "schema": {"type": "object", "properties": {"first_analyzer_used_at": {"type": "string"}, "first_log_created_at": {"type": "string"}, "has_created_first_log": {"type": "boolean"}, "has_used_analyzer": {"type": "boolean"}}}}, "500": {"description": "Internal server error", "schema": {"type": "string"}}}}}, "/migrate": {"post": {"security": [{"BearerAuth": []}], "description": "Receives a list of journal entries and/or user profile data and upserts them for the authenticated user", "consumes": ["application/json"], "produces": ["application/json"], "tags": ["migrate"], "summary": "Migrate user data", "parameters": [{"description": "Migration data", "name": "data", "in": "body", "required": true, "schema": {"$ref": "#/definitions/handlers.MigrateRequest"}}], "responses": {"201": {"description": "Data migrated successfully", "schema": {"type": "object", "additionalProperties": true}}, "400": {"description": "Bad request", "schema": {"type": "string"}}, "500": {"description": "Internal server error", "schema": {"type": "string"}}}}}}, "definitions": {"handlers.MigrateRequest": {"type": "object", "properties": {"entries": {"type": "array", "items": {"$ref": "#/definitions/handlers.MigratedJournalEntry"}}, "profile": {"$ref": "#/definitions/handlers.UserProfileData"}}}, "handlers.MigratedJournalEntry": {"type": "object", "properties": {"alignment_rating": {"type": "integer"}, "contentment_rating": {"type": "integer"}, "local_date": {"description": "YYYY-MM-DD", "type": "string"}, "topics": {"type": "string"}}}, "handlers.UserDTO": {"type": "object", "properties": {"avatar_id": {"type": "integer"}, "created_at": {"type": "string"}, "email": {"type": "string"}, "end_date": {"type": "string"}, "first_analyzer_used_at": {"type": "string"}, "first_log_created_at": {"type": "string"}, "first_name": {"type": "string"}, "goal": {"type": "string"}, "has_created_first_log": {"type": "boolean"}, "has_used_analyzer": {"type": "boolean"}, "id": {"type": "integer"}, "is_admin": {"type": "boolean"}, "last_name": {"type": "string"}, "start_date": {"type": "string"}}}, "handlers.UserProfileData": {"type": "object", "properties": {"avatar_id": {"type": "integer"}, "end_date": {"description": "YYYY-MM-DD", "type": "string"}, "first_name": {"type": "string"}, "goal": {"type": "string"}, "last_name": {"type": "string"}, "start_date": {"description": "YYYY-MM-DD", "type": "string"}}}, "handlers.adminOverview": {"type": "object", "properties": {"active_users_this_week": {"type": "integer"}, "entries_this_month": {"type": "integer"}, "entries_this_week": {"type": "integer"}, "total_journal_entries": {"type": "integer"}, "total_users": {"type": "integer"}}}, "handlers.credentials": {"type": "object", "properties": {"email": {"type": "string"}, "password": {"type": "string"}}}, "handlers.dashboardResponse": {"type": "object", "properties": {"average_month_karma": {"type": "number"}, "current_streak_days": {"type": "integer"}, "day_karma": {"type": "number"}, "entries_this_week": {"type": "integer"}, "entries_this_year": {"type": "integer"}, "has_today_entry": {"type": "boolean"}, "last7_days_trend": {"type": "array", "items": {"$ref": "#/definitions/handlers.trendPoint"}}, "month_karma": {"type": "number"}, "reference_date": {"type": "string"}, "user": {"$ref": "#/definitions/handlers.UserDTO"}, "week_karma": {"type": "number"}, "year_karma": {"type": "number"}}}, "handlers.journalEntry": {"type": "object", "properties": {"alignment_rating": {"type": "integer"}, "contentment_rating": {"type": "integer"}, "karma": {"type": "number"}, "local_date": {"type": "string"}, "topics": {"type": "string"}}}, "handlers.journalRequest": {"type": "object", "properties": {"alignment_rating": {"type": "integer"}, "contentment_rating": {"type": "integer"}, "local_date": {"description": "YYYY-MM-DD provided by frontend", "type": "string"}, "topics": {"type": "string"}}}, "handlers.submissionHistoryPoint": {"type": "object", "properties": {"has_submission": {"type": "boolean"}, "local_date": {"type": "string"}}}, "handlers.submissionHistoryResponse": {"type": "object", "properties": {"end_date": {"type": "string"}, "history": {"type": "array", "items": {"$ref": "#/definitions/handlers.submissionHistoryPoint"}}, "start_date": {"type": "string"}}}, "handlers.trendPoint": {"type": "object", "properties": {"karma": {"type": "number"}, "local_date": {"type": "string"}}}}, "securityDefinitions": {"BearerAuth": {"description": "Type \"Bearer\" followed by a space and JWT token.", "type": "apiKey", "name": "Authorization", "in": "header"}}};

        window.onload = function() {
            window.ui = SwaggerUIBundle({
                spec: spec,
                dom_id: '#swagger-ui',
                deepLinking: true,
                presets: [
                    SwaggerUIBundle.presets.apis,
                    SwaggerUIStandalonePreset
                ],
                plugins: [
                    SwaggerUIBundle.plugins.DownloadUrl
                ],
                layout: "StandaloneLayout",
                defaultModelsExpandDepth: 1,
                defaultModelExpandDepth: 1,
                docExpansion: "list",
                filter: true,
                showRequestHeaders: true,
                supportedSubmitMethods: ['get', 'post', 'put', 'delete', 'patch', 'options'],
                validatorUrl: null
            });
        };
    </script>
</body>
</html>
